# 计算机网络课程

[主要是王道课程](https://www.bilibili.com/video/BV19E411D78Q?spm_id_from=333.788.videopod.sections&vd_source=1925e38de9174c77ef2d3cfdc2dea75d&p=2)

## 第一章 概论

### 计算机网络的概念

#### 计算机网络

由若干个结点和连接这些节点的链路组成的。结点可以是计算机、交换机、路由器等可以进行通信的设备。

主要功能：数据通信（基础功能），资源共享

#### 互连网

多个计算机网络通过路由器互相连接而成。

可使用任意通信协议进行通信。

#### 互联网

互联网也称为因特网，是世界上最大的计算机网络。

使用TCP/IP协议进行通信。

#### 其他拓展

ISP：互联网服务提供商

集线器、交换机用于连接同一网络中的不同设备，而路由器则用于连接不同网络。

家用路由器实际上是交换机和路由器的功能的集合。

### 计算机网络的组成

#### 从组成部分看

##### 硬件

主机，即端系统，如：电脑、手机、物联网设备等。

通信设备，如：集线器、交换机、路由器等。

通信链路，如：光纤、光缆、电话线等。

##### 软件

方便用户使用，实现资源共享。

##### 协议

规定计算机网络中进行通信的规则。

由硬件、软件共同实现。

#### 从工作方式看

##### 边缘部分

工作方式：直接给用户提供服务。

主要由连接到互联网上的主机及其软件组成。

##### 中心部分

工作方式：位边缘部分提供服务。

由大量网络和连接这些网络的路由器组成。

#### 从逻辑功能看

##### 资源子网

计算机网络中运行应用程序，向用户提供可共享的硬件、软件和信息资源的部分。

主要由连接到互联网上的主机组成。

##### 通信子网

计算机网络中负责不同计算机网络进行通信的部分。即把计算机和其他用户装置互连在一起的所有通信设备和介质的总和。

主要有 通信链路 + 通信设备 + 协议 构成。

主机内部实现信息传输的网络适配器、底层协议 属于通信子网的范畴。

### 三大交换

电路交换、报文交换、分组交换

现代计算机网络使用分组交换

#### 电路交换

通信前先建立路线，数据传输完成后取消路线

不支持差错控制、灵活度较差

#### 报文交换

通信前无需建立连接，将数据整块存储、然后再转发

支持差错控制、但是代价较大

会造成额外的开销

#### 分组交换

在报文交换的基础上，对数据进行分组，再进行传输。

### 三大交换数据传输性能分析

三大交换的不同时延计算

![三大交换对比](./img/屏幕截图%202025-04-27%20175352.png)

### 计算机网路的分类

![计算机网络的分类](./img/屏幕截图%202025-04-29%20211733.png)

### 计算机网络的性能指标

#### 1. 速率

**信道**：表示向某一方向传送**信息的通道**，一条通信道路在逻辑上往往对应一条**发送信道**和一条**接收信道**。

**速率**：指连接到网络上的节点在信道上传输数据的速率。也称为数据率或比特率、**数据传输速率**。

**单位**：bit/s 或 b/s 或 **bps**（最常用，B = 字节，b = 比特， 1B = 8b）

#### 2. 带宽

**带宽**：表示**信道**的容量，即某信道所能传送的**最高数据率**，也称为**信道容量**。

**<u>结论：节点间通信实际能达到的最高速率，由带宽、节点性能共同限制</u>。**

#### 3. 吞吐量

吞吐量：指**单位时间**内通过某个网络（或信道、接口）的**实际数据量**。

吞吐量受带宽限制、受复杂的网络负载情况影响。

![性能指标1](./img/屏幕截图%202025-04-29%20214114.png)

#### 4. 时延

**时延**：指从**发送**到**接收**的**时间差**，也称为**延迟**。时延受网络拓扑、网络性能、网络负载情况影响。

总时延 = 发送时延 + 传播时延 + 处理时延 + 排队时延

> - 发送时延：指**发送**到**网络**的**时间差**。
> - 传播时延：指**网络**到**接收**的**时间差**。
> - 处理时延：指**接收**到**接收**的**时间差**。
> - 排队时延：指**接收**到**发送**的**时间差**。

![时延](./img/屏幕截图%202025-04-29%20214532.png)

![时延2](./img/屏幕截图%202025-04-29%20214809.png)

#### 5. 时延带宽积

时延带宽积 = 传播时延 * 带宽

时延带宽积的含义：一条链路中，已从发送端发出但尚未到达接收端的最大比特数

> 链路 - 水管
> 带宽 - 水管横截面
> 传播时延 - 水管长度

#### 6. 往返时延

**往返时延**：表示从发送方**发送完数据**，到发送方**接收到来自接收方的确认**的总共经历的时间。

#### 7. 信道利用率

信道利用率：某个信道有百分之多少的时间是有数据通过的。

信道利用率 = 有数据通过的时间 / 信道总时间

![总结](./img/屏幕截图%202025-04-29%20220430.png)

### 计算机网络的分层结构

#### “分层”的设计思想

##### 快递网络的分层结构

![快递网络分层结构](./img/屏幕截图%202025-04-30%20223958.png)

- 将复杂的快递网络在逻辑上划分成多个层次，每个层次都包含一个或多个节点，每个节点都包含一个或多个服务。
- 不同类型的节点，实现的功能层次可能不一样

##### 计算机网络的分层结构详解

![计算机网络要完成的功能](./img/屏幕截图%202025-04-30%20224218.png)

![计算机网络分层结构](./img/屏幕截图%202025-04-30%20224500.png)

- **分层设计的结构并不唯一**，可以根据需求进行修改。
- 功能安排要足够解耦，同样的功能也可以在不同的层次重复实现。

![计算机网络分层结构的分类](./img/屏幕截图%202025-04-30%20224647.png)

**网络的体系结构**：是计算机网络的各层及其协议的集合，就是这个网络及其构件所应完成的**功能的精确定义（不涉及实现）**。

**实现（implementation）**：是按照体系结构定义，用何种硬件或软件实现这些功能的问题。

体系结构是抽象的，而实现是具体的。

#### 各层之间的关系

- **实体**：在计算机网络的分层结构中，第 n 层中的活动元素（软件 + 硬件），通常称为第 n 层实体。不同机器上的同一层称为**对等层**，同一层的实体称为**对等实体**。
- **接口**：即同一节点内的***相邻两层的实体***交换信息的逻辑接口，又称为**服务访问点**。
- **服务**：服务是指***下层为紧邻的上层***提供的功能调用，它是<u>**垂直的**</u>。

#### 数据传输的过程（水平视角）

为什么要分层？为什么要指定协议？

计算机网络功能复杂 - 采用分层结构，对功能进行解耦，实现功能复用 - 对等层之间制定协议，以实现功能。

#### 数据传输的过程（垂直视角）

从上层到下层，增加头部协议

从下层到上层，减少头部协议

最后交给用户纯净的数据

#### PDU、SDU、PCI 的概念

>- **PDU**：Protocol Data Unit，协议数据单元，是计算机网络中用于交换数据的最小单位。
>- **SDU**：Service Data Unit，服务数据单元，是计算机网络中用于交换数据的最小单位。
>- **PCI**：Protocol Control Information，协议控制信息，是计算机网络中用于交换数据最基本的信息。

#### 协议的三要素

协议由**语法**、**语义**和**同步**组成。

1. **语法**：数据与控制信息的格式。
2. **语义**：需要发出何种控制信息、完成何种动作及做出何种应答。
3. **同步**：执行各种操作的条件、时序关系等，即事件实现顺序的详细说明。

![计算机网络分层结构总结](./img/屏幕截图%202025-04-30%20230918.png)

### OSI参考模型 & TCP/IP参考模型

要求：记住各层的名称和顺序、了解常见网络设备的功能层次、了解各层的功能

#### 记住：各层的名称和顺序

OSI：物联网叔会使用（物理层 - 数据链路层 - 网络层 - 传输层 - 会话层- 表示层 - 应用层）

TCP/IP：

#### 常见的网络设备所实行的功能层次

![常见网络设备所实行的功能层次](./img/屏幕截图%202025-05-01%20164245.png)

#### OSI 1#物理层

物理层任务：实现相邻节点之间的**比特**（0或者1）的传输。

1. 需定义电路接口参数
2. 需定义传输信号的含义、电器特性

#### OSI 2#数据链路层

链路层任务：确保<u>相邻节点</u>之间的链路逻辑上无差错。

1. **差错控制**：检错 + 纠错：或 检错 + 丢弃 + 重传
2. 流量控制：协调两个结点之间的速率。

#### OSI 3#网络层

网络层任务：把“分组”从源节点转发到目标节点。

1. **路由选择**：构造并维护路由表，决定分组到达目的节点的最佳路径。
2. **分组转发**：根据分组的目的地址，选择分组的传输路径。
3. 拥塞控制：发现网络拥塞，采取相应的措施进行缓解。
4. 网际互连：实现异构网络互联。
5. 其他功能（以“分组”为单位）：差错控制、流量控制、连接建立与释放、可靠传输管理。

数据链路层只能保证局部正确，而网络层需要保证全局正确。

#### OSI 4#传输层

传输层任务：实现<u>端到端</u>的通信（即实现进程之间的通信）。

1. **复用和分用**：发送端几个高层实体复用一条低层的连接，在接收端再进行分用。
2. 其他功能（以“报文段”为单位）：差错控制、流量控制、连接建立与释放、可靠传输管理。

#### OSI 5~7层

会话层主要功能：会话管理（采用检查点机制，当通信失效时从检查点继续恢复通信）

表示层主要功能：解决两台主机信息表示方式不一致的问题。

应用层主要功能：实现特定的网络应用。

#### 总结：各层数据传输单位

![各层数据传输单位](./img/屏幕截图%202025-05-01%20170008.png)

![OSI Summary](./img/屏幕截图%202025-05-01%20170139.png)

### TCP/IP参考模型

要求：记住各个层次的名称和顺序，了解TCP/IP各层和OSI模型之间的区别，了解TCP/IP各层所实行的功能

![TCP/IP参考模型&OSI参考模型](./img/屏幕截图%202025-05-01%20170355.png)

接网叔用（网络接口层 - 网络层 - 传输层 - 应用层）

#### TCP/IP 应用层

大多数应用不需要使用到OSI模型中的表示层（数据格式转换）和会话层（会话管理）的功能。

TCP/IP的理念：让应用层的特定协议去实现表示层和会话层的功能。

#### TCP/IP 网络接口层

网络硬件种类繁多，不应该有过多限制。

网络接口层的任务：实现相邻结点之间的数据传输。但对具体如何传输不做规定。

![TCP/IP VS OSI](./img/屏幕截图%202025-05-01%20171136.png)

![TCP/IP VS OSI](./img/屏幕截图%202025-05-01%20172023.png)

#### TCP/IP 网络层

使用全局差错来推出局部错误。

![TCP/IP VS OSI](./img/屏幕截图%202025-05-01%20172102.png)

将差错控制交给边缘部分主机，使得路由器等中间设备造价降低。

#### 总结 TCP/IP

![TCP/IP VS OSI Summary](./img/屏幕截图%202025-05-01%20172332.png)

说到底，OSI模型的发明者没有想到互联网世界的如此发达。

## 第二章 物理层

### 《通信基础》

要求：信源、信道、信号、信宿，**码元、速率、波特**，带宽

#### 信源、信宿、信号、信道

![信源、信宿、信号、信道](./img/屏幕截图%202025-05-01%20172851.png)

#### 数字信号与模拟信号

数字信号的值是**离散**的，模拟信号的值是**连续**的。

#### 从数学函数的角度理解信号值

![从数学函数的角度理解信号值](./img/屏幕截图%202025-05-01%20173146.png)

#### 码元的概念

每一个信号就是一个**码元**。

可以把信号周期称为码元宽度。

![码元](./img/屏幕截图%202025-05-01%20173512.png)

#### 用模拟信号设计k进制码元

![用模拟信号设计k进制码元](./img/屏幕截图%202025-05-01%20173512.png)

#### 重要：码元与比特的关系

一个码元可以携带多少个比特的数据？

如果一个周期出现 K种信号，则：

**$1码元 = \log_2(K) bit$**

#### 速率

![速率](./img/屏幕截图%202025-05-01%20174140.png)

#### 通信基础总结

![总结](./img/屏幕截图%202025-05-01%20174314.png)

### 通道的极限容量

重点：奈奎斯特定律与香农定律

#### 噪声

噪声：对信道产生干扰，影响信道的数据传输效率

#### 奈奎斯特定理

奈奎斯特定理：对于一个**理想低通信道**（***没有噪声***、带宽有限的信道）

W - 带宽

K - 码元

极限波特率 = 2W （单位：波特，码元/秒） = $2Wlog_2(K)bit/s$

#### 香农定理

香农定理：对于一个***有噪声***、**带宽有限**的信道

极限比特率 = $Wlog_2(1 + S/N)bit/s$

S/N = 信道噪声比

1dB = $10\log_{10}(S/N)$

##### 信噪比

信噪比越高，噪声对数据传输的影响就越小

通过：提高信号强度或者降低噪声强度

以“dB”为单位记录信噪比

![总结](./img/屏幕截图%202025-05-02%20205540.png)

### 编码与调制

#### 编码 & 解码，调制 & 解调

![编码 & 解码，调制 & 解调](./img/屏幕截图%202025-05-02%20205932.png)

#### 常用的编码方式

![常用编码](./img/屏幕截图%202025-05-02%20210653.png)

#### 常用的调制方法

![常用调制](./img/屏幕截图%202025-05-02%20212148.png)

![常用调制](./img/屏幕截图%202025-05-02%20212344.png)

![总结](./img/屏幕截图%202025-05-02%20212730.png)

### 传输介质

导向型和非导向型以及物理层接口的特性

#### 双绞线

![双绞线](./img/屏幕截图%202025-05-02%20213103.png)

#### 同轴电缆

![同轴电缆](./img/屏幕截图%202025-05-02%20213338.png)

#### 光纤

![光纤](./img/屏幕截图%202025-05-02%20213644.png)

##### 单模光纤与多模光纤

![单模光纤与多模光纤](./img/屏幕截图%202025-05-02%20213818.png)

#### 以太网对有线传输介质的命名规则

速度 + Base + 介质信息

- 10Base5 - 10Mbps，同轴电缆，500meters
- 10BaseF* - F 光纤
- 100BaseT - 100Mbps，双绞线，100meters

#### 无线传输介质

![无线传输介质](./img/屏幕截图%202025-05-02%20214404.png)

#### 物理层接口的特性

![物理层接口的特性](./img/屏幕截图%202025-05-02%20214443.png)

**总结**：

![总结](./img/屏幕截图%202025-05-02%20214615.png)

### 物理层设备

#### 中继器

当传输距离过长时，信号的失真就越严重。

![中继器](./img/屏幕截图%202025-05-02%20214922.png)

#### 集线器

![集线器](./img/屏幕截图%202025-05-02%20215335.png)

##### 冲突域

冲突域：如果两台**主机**同时发送信号会导致数据冲突，则这两天主机处于同一个冲突域中。

处于同一个冲突域中的主机，在发送数据前需要进行“**信道争用**”。

由集线器连接的多个结点，这些结点都会处于同一个冲突域。

**集线器**不能隔离冲突域，**交换机**可以隔离冲突域。

#### 集线器与中继器的其他特性

![集线器与中继器的其他特性](./img/屏幕截图%202025-05-02%20215904.png)

**总结**：

![总结](./img/屏幕截图%202025-05-02%20220411.png)

## 第三章 数据链路层

数据链路层 使用 物理层 提供的 “比特传输”服务

数据链路层 为 网络层提供服务，将网络层的 IP数据报（分组）封装成帧，传输给下一个相邻结点

**物理链路**：传输介质（0层） + 物理层 实现了相邻结点之间的“物理链路”

**逻辑链路**：数据链路层需要基于“物理链路”，实现相邻结点之间逻辑上的无差错的“数据链路（逻辑链路）”

![数据链路层的功能](./img/屏幕截图%202025-05-03%20105411.png)

### 组帧

#### 字符计数法

原理：在每个帧开头，用一个**定长计数字段**表示帧长

最大缺点：任何一个计数字段出错，都会导致后续所有帧的无法定界。

![2](./img/屏幕截图%202025-05-03%20110134.png)

#### 字节填充法

![2](./img/屏幕截图%202025-05-03%20110240.png)

原理：在每个帧的开头和结尾引入字符。

问题：如果数据段中出现了字节填充字符，则无法区分数据段和填充字符。

解决：引入转义字符（00011011）

新的问题：如果数据段中出现了转义字符，则无法区分数据段和转义字符。

解决：再插入一个转义字符。

#### 零比特填充法

原理：约定以一个特殊的二进制串作为一个帧的开始和结束标志。

![2](./img/屏幕截图%202025-05-03%20110650.png)

#### 违规编码法

原理：参考了曼切斯特编码，将中间无越变的部分视为开头和结尾。

![2](./img/屏幕截图%202025-05-03%20110933.png)

### 差错控制

目标：发现并解决一个帧内部的“位错”

#### 奇偶校验

![2](./img/屏幕截图%202025-05-03%20111400.png)

##### 异或运算

![2](./img/屏幕截图%202025-05-03%20111825.png)

**总结**：

![2](./img/屏幕截图%202025-05-03%20111857.png)

### 检错编码（CRC 循环冗余校验码）

#### 循环冗余校验码的基本思想

![2](./img/屏幕截图%202025-05-03%20112221.png)

关键：除数和被除数

![2](./img/屏幕截图%202025-05-03%20112544.png)

![2](./img/屏幕截图%202025-05-03%20112630.png)

![2](./img/屏幕截图%202025-05-03%20112630.png)

![2](./img/屏幕截图%202025-05-03%20112728.png)

#### 循环校验码的检错

![2](./img/屏幕截图%202025-05-03%20113035.png)

**总结**：

![2](./img/屏幕截图%202025-05-03%20113043.png)

### 海明校验码

#### 海明校验码的基本思想

![2](./img/屏幕截图%202025-05-03%20114240.png)

### 流量控制、可靠传输与滑动窗口机制

#### 滑动窗口机制

![1](./img/屏幕截图%202025-05-03%20191231.png)

![2](./img/屏幕截图%202025-05-03%20191251.png)

![3](./img/屏幕截图%202025-05-03%20191305.png)

### 停止等待协议

![1](./img/屏幕截图%202025-05-03%20191533.png)

#### 数据帧、确认帧、帧序号 的概念

![1](./img/屏幕截图%202025-05-03%20191857.png)

#### “正常”情况

![1](./img/屏幕截图%202025-05-03%20192013.png)

#### 异常情况实例：数据帧丢失

进行超时重传

#### 异常情况实例：确认帧丢失

接收方收到重复帧之后，对于接收方来说

此时的帧序号落在了接收窗口之外，会进行：

1. 丢弃重复帧
2. 重新发送确认帧。

##### 探讨：为什么要给帧编号

如果无序号，接收方无法区分重复帧

#### 异常情况实例：数据有差错

接收方收到有差错的数据帧之后，会丢弃帧，但不会发送确认帧

发送方进行超时重传

### 后退N帧协议

![1](./img/屏幕截图%202025-05-03%20192655.png)

#### 后退N帧 - “正常”情况

发送方向接收方发送帧

接收方接收到发送方窗口的最后一帧时

接收方发送最后一个帧所代表的确认帧

后退N帧协议规定：接收方可以“**累计确认**”。

即连续收到多个数据帧时，**可以仅返回最后一个正确帧的ACK**

#### 后退N帧 - 异常情况实例：数据帧丢失

接收方直接给发送方发送最后一个确认帧

发送方收到后移动滑动窗口，其余帧进行超时重传

#### 后退N帧 - 异常情况实例：确认帧丢失

接收方收到“**非法帧**”时，返回目前已接收的最后一个正确帧的ACK

![1](./img/屏幕截图%202025-05-03%20193841.png)

![2](./img/屏幕截图%202025-05-03%20193849.png)

### 选择重传协议

![1](./img/屏幕截图%202025-05-03%20194114.png)

#### 选择重传协议的窗口大小限制条件

在实际使用中，我们通常会使得 发送窗口 === 接收窗口

#### 选择重传协议 - “正常”情况

![1](./img/屏幕截图%202025-05-03%20194532.png)

#### 选择重传协议 - 异常情况实例：数据帧丢失

![1](./img/屏幕截图%202025-05-03%20194730.png)

#### 选择重传协议 - 异常情况实例：确认帧丢失

![1](./img/屏幕截图%202025-05-03%20194816.png)

![1](./img/屏幕截图%202025-05-03%20194857.png)

**总结**：

![1](./img/屏幕截图%202025-05-03%20195201.png)

### 三种协议的信道利用率分析

#### S-W协议的信道利用率

![1](./img/屏幕截图%202025-05-03%20195556.png)

确认帧很短时：

![2](./img/屏幕截图%202025-05-03%20195633.png)

#### GBN、SR协议的信道利用率

![1](./img/屏幕截图%202025-05-03%20200008.png)

分子值大于分母值：

![1](./img/屏幕截图%202025-05-03%20200008.png)

##### 术语补充：滑动窗口协议

GBN、SR协议都是滑动窗口协议

##### 术语补充：ARQ协议与连续ARQ协议

S-W、GBN、SR都是ARQ协议

GBN、SR都是连续ARQ协议

### 信道划分与介质访问控制

#### 什么是“介质访问控制”？

介质访问控制（MAC）：多个结点共享同一个“总线型”广播信道时，可能发送“信号冲突”。。

所谓介质访问控制，就是研究

应该怎么控制各个结点对传输介质的访问，才能减少冲突，甚至避免冲突。

![1](./img/屏幕截图%202025-05-03%20201522.png)

#### 时分复用（TDM）

![1](./img/屏幕截图%202025-05-03%20201816.png)

#### 统计时分复用（STDM）

![1](./img/屏幕截图%202025-05-03%20201851.png)

#### 频分复用（FDM）

![1](./img/屏幕截图%202025-05-03%20202245.png)

#### 波分复用（WDM）

![1](./img/屏幕截图%202025-05-03%20202331.png)

#### 码分复用（CDM）

![1](./img/屏幕截图%202025-05-04%20091659.png)

![2](./img/屏幕截图%202025-05-04%20092053.png)

![3](./img/屏幕截图%202025-05-04%20092248.png)

### 随机访问 - 介质访问控制

![1](./img/屏幕截图%202025-05-04%20094033.png)

#### 纯 ALOHA、 时隙 ALOHA

![1](./img/屏幕截图%202025-05-04%20092616.png)

#### CSMA协议

在发送数据之前，需要监听信道是否空闲。

![1](./img/屏幕截图%202025-05-04%20093257.png)

##### 1-坚持CSMA协议

![1](./img/屏幕截图%202025-05-04%20093522.png)

##### 1-非坚持CSMA协议

![1](./img/屏幕截图%202025-05-04%20093723.png)

##### p-坚持CSMA协议

![1](./img/屏幕截图%202025-05-04%20093944.png)

#### CSMA/CD协议

用于早起的总线型以太网。

![1](./img/屏幕截图%202025-05-04%20094252.png)

##### CSMA/CD协议 要点

![1](./img/屏幕截图%202025-05-04%20094542.png)

##### CSMA/CD协议 发送方

![1](./img/屏幕截图%202025-05-04%20094527.png)

##### CSMA/CD协议 争用期

![1](./img/屏幕截图%202025-05-04%20095012.png)

##### CSMA/CD协议 最短帧长

发送方发送的最小帧长不能低于**两倍的单向传播时延乘上带宽**。

不完整的非法帧会被丢弃，所以当帧长小于最短帧长时，必须进行填充。

##### CSMA/CD协议 最长帧长

规定最长帧长以防止某些节点的一直占用。

一般，**最短帧长为64B，最长帧长为1518B**。

### CSMA/CA协议

CSMA/CA协议：发送过程中不进行监听，发送之前尽量避免冲突

用于无线网络

#### 什么是AP

AP：Access Point，即接入点。也就是你连接的WIFI热点。

#### 无线网络所面临的新问题

1. 硬件上很难实现一直监听
2. 存在“隐蔽站”的问题

![1](./img/屏幕截图%202025-05-04%20215229.png)

![1](./img/屏幕截图%202025-05-04%20215332.png)

#### 解决“隐蔽站”

![1](./img/屏幕截图%202025-05-04%20215720.png)

![1](./img/屏幕截图%202025-05-04%20215757.png)

### 轮询访问 - 介质访问控制

![1](./img/屏幕截图%202025-05-04%20221128.png)

核心特点：对于环线拓扑网络，各节点“轮询访问”信道，**不会发送信道冲突**。

此时，需要通过令牌传递协议进行访问控制。

#### 令牌传递协议的工作原理

无论是令牌帧还是数据帧，都只能沿单向传输。

#### 令牌帧、数据帧

![1](./img/屏幕截图%202025-05-04%20220951.png)

#### MAU - 令牌环网集中控制器

环形拓扑机制需要通过MAU进行控制。

### 局域网 IEEE 802.11

### 局域网的基本概念与体系结构

1. 覆盖较小的地理范围。
2. 较低的时延和误码率。
3. 局域网内的各节点以“帧”为单位。
4. 支持**单播**、**多播**和**广播**。

#### 有线局域网

##### 令牌环网

1. 环形
2. 同轴电缆或双绞线
3. 令牌传递协议

##### 以太网

物理层面采用曼彻斯特编码

1. 总线性
2. 同轴电缆加中继器
3. CSMA/CD协议

###### 光纤以太网

1. 点对点
2. 光纤
3. NULL（两条光纤实现全双工）

###### 双绞线以太网

用集线器连接：

1. 物理上星形，逻辑上总线型
2. 双绞线
3. CSMA/CD协议

用交换机连接：

1. 物理、逻辑都是星形
2. 双绞线
3. CSMA/CD协议 或者 NULL（无协议）

#### 硬件架构

每个硬件设备都有一个唯一的硬件地址（MAC地址）。

##### 网络适配器

1. 负责把帧发送到局域网。
2. 负责从局域网接收帧。

### 以太网与IEEE 802.3

![1](./img/屏幕截图%202025-05-05%20133322.png)

![1](./img/屏幕截图%202025-05-04%20223600.png)

#### 以太网MAC帧

![1](./img/屏幕截图%202025-05-05%20131427.png)

![1](./img/屏幕截图%202025-05-05%20131336.png)

#### 重点：单播帧、广播帧如何传播

![1](./img/屏幕截图%202025-05-05%20132718.png)

#### 广播域、冲突域

![1](./img/屏幕截图%202025-05-05%20132919.png)

### VLAN 虚拟局域网

![1](./img/屏幕截图%202025-05-05%20132919.png)

可将一个物理局域网分割成若干个虚拟局域网

#### 1. 基于接口划分VLAN

#### 2. 基于MAC地址

#### 3. 基于IP地址

### 无线以太网与IEEE 802.11

#### 无线局域网基本概念

![1](./img/屏幕截图%202025-05-05%20144837.png)

## 第四章 网络层

![1](./img/屏幕截图%202025-05-08%20165446.png)

![1](./img/屏幕截图%202025-05-08%20170326.png)

网络层为**传输层**提供服务。

实现“主机到主机”的功能。

![1](./img/屏幕截图%202025-05-06%20183921.png)

### IPv4分组

![1](./img/屏幕截图%202025-05-06%20190019.png)

#### 协议之间的服务关系

#### IP分组（数据报）的格式

![1](./img/屏幕截图%202025-05-06%20184517.png)

#### IP数据报的分片

MF、DF、片偏移

![1](./img/屏幕截图%202025-05-06%20185452.png)

![1](./img/屏幕截图%202025-05-06%20185639.png)

![1](./img/屏幕截图%202025-05-06%20185828.png)

### IP地址 + 整章串讲

![1](./img/屏幕截图%202025-05-06%20190140.png)

#### 最初的IP地址分类方案

![1](./img/屏幕截图%202025-05-06%20190316.png)

#### 一些特殊的IP地址

![1](./img/屏幕截图%202025-05-07%20124856.png)

### 子网划分、子网掩码

![1](./img/屏幕截图%202025-05-07%20125628.png)

#### 为什么要进行子网划分

让很大的ip地址块划分成若干个较小的ip地址块

增加ip地址的利用率

#### 子网掩码的作用

判断网络号和子网号是否完全相同

ip地址与子网掩码想与，判断是否在同一子网

### 无分类编址 CIDR

![1](./img/屏幕截图%202025-05-08%20125740.png)

#### 传统的IP地址分类方案有什么缺陷？

![1](./img/屏幕截图%202025-05-08%20123936.png)

#### CIDR的作用

CIDR是对传统的IP地址分类方案进行**改进**后的结果

![1](./img/屏幕截图%202025-05-08%20124241.png)

#### 用逆向哈夫曼树构造CIDR

![1](./img/屏幕截图%202025-05-08%20125300.png)

### 路由聚合

即关于路由表的生成

可以将有着一定数量相同位数的IP地址聚合成一个地址

路由聚合（构成超网）：对于一个路由转发表，如果几条路由表项的**转发接口相同**，部分**网络前缀也相同**，那么就可以将这几条路由表项聚合为一条。

![1](./img/屏幕截图%202025-05-08%20164753.png)

- 路由聚合可以减少路由表的大小
- 可能会引入额外的地址

#### 最长前缀匹配原则

![1](./img/屏幕截图%202025-05-08%20165417.png)

### 网络地址转换 NAT
